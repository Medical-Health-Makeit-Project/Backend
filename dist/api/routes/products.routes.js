"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const Products_controller_1 = require("../controllers/Products.controller");
const roles_utils_1 = require("../utils/roles.utils");
const constants_utils_1 = require("../utils/constants.utils");
const productUpdater_middleware_1 = __importDefault(require("../middlewares/productUpdater.middleware"));
const authorization_middlewares_1 = __importDefault(require("../middlewares/authorization.middlewares"));
const formData_middlewares_1 = __importDefault(require("../middlewares/formData.middlewares"));
const productRegister_middleware_1 = __importDefault(require("../middlewares/productRegister.middleware"));
const productDelete_middleware_1 = __importDefault(require("../middlewares/productDelete.middleware"));
const productUpdate_middleware_1 = __importDefault(require("../middlewares/productUpdate.middleware"));
const productsRouter = (0, express_1.Router)();
productsRouter.get('/', Products_controller_1.ProductsController.getAllProducts);
productsRouter.get('/:category', Products_controller_1.ProductsController.getProductsByCategory);
productsRouter.post('/', (0, authorization_middlewares_1.default)(roles_utils_1.allowedRoles.ADMIN), (0, formData_middlewares_1.default)(constants_utils_1.PRESET_CLOUDINARY, constants_utils_1.PRODUCTS_FOLDER_CLOUDINARY), productRegister_middleware_1.default, Products_controller_1.ProductsController.createProduct);
productsRouter.put('/', (0, authorization_middlewares_1.default)(roles_utils_1.allowedRoles.ADMIN), (0, formData_middlewares_1.default)(constants_utils_1.PRESET_CLOUDINARY, constants_utils_1.PRODUCTS_FOLDER_CLOUDINARY), productUpdater_middleware_1.default, productUpdate_middleware_1.default, Products_controller_1.ProductsController.updateProduct);
productsRouter.delete('/', (0, authorization_middlewares_1.default)(roles_utils_1.allowedRoles.ADMIN), productDelete_middleware_1.default, Products_controller_1.ProductsController.deleteProduct);
exports.default = productsRouter;
